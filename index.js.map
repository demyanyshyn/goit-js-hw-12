{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export default class RenderGallery {\n  constructor() {\n    this.gallery = document.querySelector(`.gallery`);\n  }\n  changeResolution(img) {\n    return img.slice(0, -7) + `180.jpg`;\n  }\n  showFirstPage(feedback) {\n    this.clearGalery();\n    this.#renderItems(feedback);\n  }\n  #renderItems(feedback) {\n    const markup = feedback.data.hits\n      .map(image => {\n        return `<li>\n        <div clas=\"img-box\">\n          <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n            <img\n              class=\"gallery-image\"\n              src=\"${this.changeResolution(image.webformatURL)}\"\n              data-source=\"${image.largeImageURL}\"\n              alt=\"${image.tags}\"\n            />\n          </a>\n        </div>\n        <ul class=\"content-box\">\n          <li class=\"content-item\">\n            <div class=\"content-header\">Likes</div>\n            <div class=\"content\">${image.likes}</div>\n          </li>\n          <li class=\"content-item\">\n           <div class=\"content-header\">Views</div>\n            <div class=\"content\">${image.views}</div>\n          </li>\n          <li class=\"content-item\">\n            <div class=\"content-header\">Comments</div>\n            <div class=\"content\">${image.comments}</div>\n          </li>\n          <li class=\"content-item\">\n            <div class=\"content-header\">Downloads</div>\n            <div class=\"content\">${image.downloads}</div>\n          </li>\n        </ul>\n      </li>\n      `;\n      })\n      .join('');\n    this.gallery.insertAdjacentHTML('beforeend', markup);\n  }\n\n  clearGalery() {\n    this.gallery.innerHTML = ``;\n    this.removeBtn();\n  }\n\n  createBtn(callback, calback2) {\n    const div = document.createElement(`div`);\n    div.classList.add(`pages-btn-wrapper`);\n    div.innerHTML = `\n      <buton class=\"search-btn\" id=\"next-page\" type=\"button\">Load more</buton>\n      <! Add only for demo work on last page-->\n      <buton class=\"search-btn\" id=\"last-page\" type=\"button\">Load last page</buton>`;\n    const nextBtn = div.querySelector(`#next-page`);\n    const lastBtn = div.querySelector(`#last-page`);\n    nextBtn.addEventListener(`click`, event => callback(event));\n    lastBtn.addEventListener(`click`, event => callback2(event));\n\n    this.gallery.insertAdjacentElement(`afterend`, nextBtn);\n  }\n  removeBtn() {\n    const btn = document.querySelectorAll(`.pages-btn-wrapper`);\n    btn ? btn.forEach(el => el.remove()) : ``;\n  }\n\n  loader() {\n    const loader = `<div class=\"content-header\">Loading images, please wait... <br/><span class=\"loader\"></span></div>`;\n    this.clearGalery();\n    this.gallery.insertAdjacentHTML('beforeend', loader);\n  }\n}\n","import axios from 'axios';\n\n// classes\nexport default class ImageQuery {\n  #options;\n  #url;\n\n  constructor() {\n    this.#options = {\n      params: {\n        _method: 'get',\n        key: `49061032-8122651df51dcd062279bc436`,\n        q: ``,\n        orientation: `horizontal`,\n        page: 1,\n        safesearch: true,\n        image_type: `photo`,\n        per_page: 40,\n      },\n    };\n    this.#url = `https://pixabay.com/api/`;\n  }\n  async sendQuery(searchInput) {\n    this.#options.params.q = searchInput;\n    const response = await axios(this.#url, this.#options);\n    return response;\n    // .then(items => thanCall(items))\n    // .catch(error => cathCall(error));\n  }\n  clearSearchQuery() {\n    this.#options.params.q = ``;\n    this.#options.params.page = 1;\n  }\n}\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// my inport\nimport RenderGallery from './js/render-functions';\nimport ImageQuery from './js/pixabay-api';\n\nconst optionsSimpleLightBox = {\n  captionDelay: 250,\n  captionsData: 'alt',\n};\n\nfunction getOn() {\n  form.addEventListener(`submit`, event => search(event));\n}\nasync function search(event) {\n  event.preventDefault();\n  if (isValidInput()) {\n    gallery.loader();\n    const id = setTimeout(async () => {\n      try {\n        const response = await pixABay.sendQuery(searchInput);\n        // if (!response.data) return;\n        render(response);\n      } catch (error) {\n        errorShow(error);\n      }\n      clearInterval(id);\n    }, 2000);\n  } else {\n    errorShow(`Sorry, input not valid`);\n    refresh();\n  }\n}\nasync function loadMore(event) {\n  console.log(`click`);\n}\nasync function loadLast(event) {\n  console.log(`last`);\n}\nfunction isValidInput() {\n  if (input.value && input.value.length <= 100) {\n    searchInput = input.value;\n    return true;\n  } else return false;\n}\n\nfunction render(feedback) {\n  if (feedback.data.hits.length > 0) {\n    gallery.showFirstPage(feedback);\n    gallery.createBtn(loadMore);\n\n    buildLightshow();\n  } else {\n    errorShow(`Sorry, there are no images matching your search query. Please try again!\n  `);\n    gallery.clearGalery();\n  }\n}\n\nfunction buildLightshow() {\n  // let galleryLight = new SimpleLightbox('.gallery-link', optionsSimpleLightBox);\n  // galleryLight.on('show.simplelightbox', function () {});\n  // galleryLight.on('error.simplelightbox', function (e) {\n  //   console.log(e);\n  // });\n  galleryLight.refresh();\n}\n\nfunction refresh() {\n  gallery.clearGalery();\n  input.value = ``;\n  pixABay.clearSearchQuery();\n}\n\nfunction errorShow(message) {\n  message = message.message ? message.message : message;\n  let errorMessage = {\n    message,\n    icon: `material-icons-outlined`,\n    iconColor: '#fff',\n    iconText: `dangerous`,\n    messageColor: `#fff`,\n    color: `#ef4040`,\n    position: `topRight`,\n    timeout: 2000,\n    theme: `dark`,\n    maxWidth: `432px`,\n  };\n  iziToast.show(errorMessage);\n}\n\nconst gallery = new RenderGallery();\nconst pixABay = new ImageQuery();\nlet galleryLight = new SimpleLightbox('.gallery-link', optionsSimpleLightBox);\n\nconst form = document.querySelector(`#search-form`);\nconst btn = document.querySelector(`#search-btn`);\nconst input = document.querySelector(`#search-input`);\n\nlet searchInput;\n\ngetOn();\n"],"names":["RenderGallery","__privateAdd","_RenderGallery_instances","img","feedback","__privateMethod","renderItems_fn","callback","calback2","div","nextBtn","lastBtn","event","btn","el","loader","markup","image","ImageQuery","_options","_url","__privateSet","searchInput","__privateGet","axios","optionsSimpleLightBox","getOn","form","search","isValidInput","gallery","id","response","pixABay","render","error","errorShow","refresh","loadMore","input","buildLightshow","galleryLight","message","errorMessage","iziToast","SimpleLightbox"],"mappings":"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"}