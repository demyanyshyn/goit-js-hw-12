{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export default class RenderGallery {\n  constructor() {\n    this.gallery = document.querySelector(`.gallery`);\n  }\n  changeResolution(img) {\n    return img.slice(0, -7) + `180.jpg`;\n  }\n  renderItems(feedback) {\n    const markup = feedback.data.hits\n      .map(image => {\n        return `<li>\n        <div clas=\"img-box\">\n          <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n            <img\n              class=\"gallery-image\"\n              src=\"${this.changeResolution(image.webformatURL)}\"\n              data-source=\"${image.largeImageURL}\"\n              alt=\"${image.tags}\"\n            />\n          </a>\n        </div>\n        <ul class=\"content-box\">\n          <li class=\"content-item\">\n            <div class=\"content-header\">Likes</div>\n            <div class=\"content\">${image.likes}</div>\n          </li>\n          <li class=\"content-item\">\n           <div class=\"content-header\">Views</div>\n            <div class=\"content\">${image.views}</div>\n          </li>\n          <li class=\"content-item\">\n            <div class=\"content-header\">Comments</div>\n            <div class=\"content\">${image.comments}</div>\n          </li>\n          <li class=\"content-item\">\n            <div class=\"content-header\">Downloads</div>\n            <div class=\"content\">${image.downloads}</div>\n          </li>\n        </ul>\n      </li>\n      `;\n      })\n      .join('');\n    this.clearGalery();\n    this.gallery.insertAdjacentHTML('beforeend', markup);\n  }\n  clearGalery() {\n    this.gallery.innerHTML = ``;\n  }\n  loader() {\n    const loader = `<div class=\"content-header\">Loading images, please wait... <br/><span class=\"loader\"></span></div>`;\n    this.clearGalery();\n    this.gallery.insertAdjacentHTML('beforeend', loader);\n  }\n}\n","import axios from 'axios';\n\n// classes\nexport default class ImageQuery {\n  #options;\n  #url;\n\n  constructor() {\n    this.#options = {\n      params: {\n        _method: 'get',\n        key: `49061032-8122651df51dcd062279bc436`,\n        q: ``,\n        orientation: `horizontal`,\n        page: 1,\n        safesearch: true,\n        image_type: `photo`,\n        per_page: 9,\n      },\n    };\n    this.#url = `https://pixabay.com/api/`;\n  }\n  sendQuery(searchInput, thanCall, cathCall) {\n    this.#options.params.q = searchInput;\n\n    axios(this.#url, this.#options)\n      .then(items => thanCall(items))\n      .catch(error => cathCall(error));\n  }\n  clearSearchQuery() {\n    this.#options.params.q = ``;\n    this.#options.params.page = 1;\n  }\n}\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// my inport\nimport RenderGallery from './js/render-functions';\nimport ImageQuery from './js/pixabay-api';\n\nconst optionsSimpleLightBox = {\n  captionDelay: 250,\n  captionsData: 'alt',\n};\n\nfunction getOn() {\n  form.addEventListener(`submit`, event => search(event));\n}\nfunction search(event) {\n  event.preventDefault();\n  if (isValidInput()) {\n    gallery.loader();\n    const id = setTimeout(() => {\n      pixABay.sendQuery(searchInput, render, errorShow);\n      clearInterval(id);\n    }, 2000);\n  } else {\n    errorShow(`Sorry, input not valid`);\n    refresh();\n  }\n}\nfunction isValidInput() {\n  if (input.value && input.value.length <= 100) {\n    searchInput = input.value;\n    return true;\n  } else return false;\n}\n\nfunction render(feedback) {\n  if (feedback.data.hits.length > 0) {\n    gallery.renderItems(feedback);\n    buildLightshow();\n  } else {\n    errorShow(`Sorry, there are no images matching your search query. Please try again!\n  `);\n    gallery.clearGalery();\n  }\n}\n\nfunction buildLightshow() {\n  // let galleryLight = new SimpleLightbox('.gallery-link', optionsSimpleLightBox);\n  // galleryLight.on('show.simplelightbox', function () {});\n  // galleryLight.on('error.simplelightbox', function (e) {\n  //   console.log(e);\n  // });\n  galleryLight.refresh();\n}\n\nfunction refresh() {\n  gallery.clearGalery();\n  input.value = ``;\n  pixABay.clearSearchQuery();\n}\nfunction errorShow(message) {\n  message = message.message ? message.message : message;\n  let errorMessage = {\n    message,\n    icon: `material-icons-outlined`,\n    iconColor: '#fff',\n    iconText: `dangerous`,\n    messageColor: `#fff`,\n    color: `#ef4040`,\n    position: `topRight`,\n    timeout: 2000,\n    theme: `dark`,\n    maxWidth: `432px`,\n  };\n  iziToast.show(errorMessage);\n}\n\nconst gallery = new RenderGallery();\nconst pixABay = new ImageQuery();\nlet galleryLight = new SimpleLightbox('.gallery-link', optionsSimpleLightBox);\n\nconst form = document.querySelector(`#search-form`);\nconst btn = document.querySelector(`#search-btn`);\nconst input = document.querySelector(`#search-input`);\n\nlet searchInput;\n\ngetOn();\n"],"names":["RenderGallery","img","feedback","markup","image","loader","ImageQuery","__privateAdd","_options","_url","__privateSet","searchInput","thanCall","cathCall","__privateGet","axios","items","error","optionsSimpleLightBox","getOn","form","event","search","isValidInput","gallery","id","pixABay","render","errorShow","refresh","input","buildLightshow","galleryLight","message","errorMessage","iziToast","SimpleLightbox"],"mappings":"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"}